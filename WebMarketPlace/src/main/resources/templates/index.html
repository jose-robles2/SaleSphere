<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" lang="en">

    <head>
        <meta charset="UTF-8">
        <title>MarketPlace</title>
        <style>
            .appContainer {
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            .appHeader {
                box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2); /* Shadow effect */
                padding: 20px; /* Padding around header content */
                text-align: center;
                width: 100%;
            }
            .itemsContainer {
                padding: 20px;
                max-height: 500px;
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                grid-column-gap: 40px;
                grid-row-gap: 30px;
            }
            .itemDisplay {
                border: 1px solid;
                border-radius: 15px;
                padding: 10px;
                min-height: 100px;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                white-space: pre-wrap;
                overflow: hidden;
                word-wrap: break-word;
                cursor: pointer;
           }
           .itemElement {
                display: flex;
                align-items: center;
           }
            .sideBySide {
                flex: 1;
            }
        </style>
    </head>
    <body>
        <h1>Current User</h1>
        <form th:action="@{/getCurrentUser}" th:object="user" method="get">
            <p>Current User: <input type="hidden" name="currentUser" th:value="${user.firstName}" /> </p>
        </form>
        <h1>Set Current User</h1>
        <form th:action="@{/setUser}" th:object="${user}" method="post">
            <input type="hidden" name="currentUser" th:value="${user.getFirstName()}" />
            <p>Id: <input type="text" th:field="*{id}" /></p>
            <p><input type="submit" value="Submit" /> </p>
        </form>

        <div class="appContainer">
            <div class="appHeader">
                <h1>SaleSphere Market</h1>
            </div>
            <div class="itemsContainer">
                <div th:each="item: ${items}" class="itemDisplay">
                    <div class="itemElement">
                        <div class="sideBySide"><!--
                            --><h4 th:text="${item.getName()}"></h4><!--
                            --><p th:text="${item.getDescription()}"></p><!--
                        --></div>
                        <div class="sideBySide"><!--
                            --><p th:text="'$' + ${item.getPrice()}"></p><!--
                        --></div>
                    </div>
                    <div class="itemElement">
                        <div class="sideBySide"><!--
                            --><form th:action="@{/buyItem}" th:object="${item}" method="post"><!--
                                --><input type="hidden" name="id" th:value="${item.id}" /><!--
                                --><input type="hidden" name="name" th:value="${item.name}" /><!--
                                --><input type="hidden" name="description" th:value="${item.description}" /><!--
                                --><input type="hidden" name="imageUrl" th:value="${item.imageUrl}" /><!--
                                --><input type="hidden" name="locationState" th:value="${item.locationState}" /><!--
                                --><input type="hidden" name="price" th:value="${item.price}" /><!--
                                --><input type="hidden" name="stock" th:value="${item.stock}" /><!--
                            --><button type="submit">Buy</button> <!--
                            --></form><!--
                        --></div>
                        <div class="sideBySide"><!--
                            --><p th:text="'In Stock: ' + ${item.getStock()}" style="flex: 1"></p><!--
                        --></div>
                    </div>
                </div>
            </div>

            <div>
                <h2>Item Creation Form</h2>
                <h3>Insert Form below...</h3>
                <!--For the submit action of this form, call createCourse() and pass in a course object-->
                <!--            <form action = "" th:action="@{/createItem}" th:object="${newItem}" method="post">-->
                <!--                <p>Course Code: <input th:field="*{courseId}" type="text" name="courseId" id="courseId"> </p>-->
                <!--                <p>Course Code: <input th:field="*{courseName}" type="text" name="courseName" id="courseName"> </p>-->
                <!--                <p>Instructor:-->
                <!--                    <select th:field="*{instructor}" name="intstuctor" id="instructor">-->
                <!--                        <option-->
                <!--                                th:each="instructor: ${instructors}"-->
                <!--                                th:value="${instructor.id}"-->
                <!--                                th:text="${instructor.firstName}+ ' ' +${instructor.lastName}"-->
                <!--                                value="test">-->
                <!--                            Select-->
                <!--                        </option>-->
                <!--                    </select>-->
                <!--                </p>-->
                <!--                <p><input type="submit" value="submit"></p>-->
                <!--            </form>-->
            </div>
        </div>
    </body>
</html>